## Introduce

This document is a migration guide for the TOAST UI Grid 3.0 version update, which will help you upgrade to the 3.0 version quickly and easily, and introduce new features.

In the meantime, the TOAST UI's application products have been redesigned to strengthen the TOAST UI brand.
With the 3.0 version update, the Grid also applies a new design.

Theme API options are enhanced to allow for more detailed style settings for new designs.
In addition, the featrue to display the tree data is added.

Please refer to the contents below and upgrade to version 3.0!


## 1. Changes design

Now you can easily see your data with a more visible design.
No hard work is required.
You only need to change the JavaScript and CSS files to the new version.

_If you are using bower or CDN, be sure to update [`tui-code-snippet`](https://github.com/nhnent/tui.code-snippet) to version **1.4.0**._

### Using npm

* Update the `package.json` dependency version.

``` js
{
    "dependencies": {
        "tui-grid": "^3.0.0"
    }
}
```

### Using CDN

``` html
<link rel="stylesheet" href="https://uicdn.toast.com/tui-grid/v3.0.0/tui-grid.css" />
...
...
<script src="https://uicdn.toast.com/tui-grid/v3.0.0/tui-grid.js"></script>
```

### Note

The default value of options related to row height has been changed according to the changed design.

| Option | Before | After |
| --- | ---- | ---- |
| `minRowHeight` | `35px` | `40px` |
| `header.height` | `27px` | `40px` |

It is recommended to set the default value or more for design optimization, but if you want to set a value below, you can do the following.

After setting the `minRowHeight` value of the grid options, change the cell's padding value by overriding the css style.

``` js
var options = {
    minRowHeight: 27
};
```

``` css
.tui-grid-cell .tui-grid-cell-content {
    padding: 3px 12px;
}
```

## 2. Changes theme API options

If the layout of the previous version was closed type, it was changed to open layout in version 3.0.
As a result, unnecessary options in using the theme API have been removed.
Added options to change the style in more detail.

```js
var Grid = require('tui-grid');

Grid.applyTheme('striped');
Grid.applyTheme('clean');

Grid.applyTheme('default', {
    // theme options
});
```

### Removed options

* `grid` : The common border and area have been removed and the option has been deprecated.

```js
{
    grid: {
        background: '#fff',
        border: '#ccc',
        text: '#444'
    }
}
```
### Added options

#### 1. Layout-Related Options

* `outline` : Controls the outline of the table.

```js
{
    outline: {
        border: 'red',
        showVerticalBorder: true
    }
}
```

* `frozenBorder` : Changes the border color for seperating frozen column areas.

```js
{
    frozenBorder: {
        border: 'red'
    }
}
```

* `scrollbar.border` : Change the border color for the scrollbar area.
* `scrollbar.emptySpace `: Changes the background color for the rest of the area except the scrollbar.

```js
{
    scrollbar: {
        border: 'red',
        emptySpace: 'pink'
    }
}
```

#### 2. Area-Related Options

* `area` : Change the border and background color for header, body, and summary areas.

```js
{
    area: {
      header: {
          border: 'blue',
          background: 'skyblue'
      },
      body: {
          background: 'yellow'
      },
      summary: {
          border: 'red',
          background: 'pink'
      }
    }
}
```

#### 3. Cell-Related Options

* `cell.rowHead` : Change the cell style of the meta-column area.
* `cell.selectedRowHead` : Changes the cell style of the selected meta-column area.
* `cell.summary` : Change the cell style of the summary area.

```js
{
    cell: {
        rowHead: {
            background: 'pink',
            border: 'red',
            text: 'red',
            showVerticalBorder: true,
            showHorizontalBorder: true
        },
        selectedRowHead: {
            background: '#e5f6ff'
        },
        summary: {
            background: 'pink',
            border: 'red',
            text: 'red',
            showVerticalBorder: true
        }
    }
}
```

## 3. Adds a tree column

### Description

![tree-column](https://user-images.githubusercontent.com/18183560/41633101-0bd39096-7478-11e8-814f-5acbd21ea7d5.png)

* When a tree column is set, the data of a specific column is displayed in the tree form.
* Tree Elements and Functions
    * Depth : Represents a hierarchical relationship between parent and child rows. The minimum depth starts with `1`.
    * Expand/Collapse button : It is added to the parent row that has a child row, and you can show or hide child rows.
    * Icon : You can add a status icon that shows whether a parent row has child rows.

### How to use

#### 1. Sets tree data

* It initializes the row data(`{}`) in an array(`[]`) like the grid data.
* If there are child rows, add the row data for the child row in the `_children` property of the parent row data.
* You can handle dynamic loading by setting the `_children` property to a` boolean` value.
* The `_extraData.treeState` property allows you to set the initial state of the expand or collapse for child rows. If not set, the default value is collapsed(`COLLAPSE`).

```js
var data = [
    {
        c1: 'foo',
        c2: 'bar',
        _extraData: {
            treeState: 'EXPAND' // 'COLLAPSE'
        },
        _children: [
            {
                c1: 'baz',
                c2: 'qux'
            },
            {
                c1: 'quux',
                c2: 'corge',
                _children: true
            },
            // ...
        ]
    },
    // ...
];
```

#### 2. Activates tree column

* You can add options using the grid creation options.

| Options | Description |
| --- | --- |
| `name` | Set column name to show tree data |
| `useIcon` | Set whether to use the icon |
| `useCascadingCheckbox` | Set whether to select parent-child relationship when selecting checkbox in meta column area |

``` js
var options = {
    treeColumnOptions: {
        name: 'c1',
        useIcon: true,
        useCascadingCheckbox: true
    },
    // ...
}
```

### New APIs

#### 1. Method

```js
// Example
grid.expandAll();
```

| Name |
| --- |
| `expand` |
| `expandAll` |
| `collapse` |
| `collapseAll` |
| `getAncestors` |
| `getDescendants` |
| `getParent` |
| `getChildren` |
| `getDepth` |

#### 2. Custom event

```js
// Example
grid.on('expanded', function(ev) {
    console.log(ev.rowKey);
});
```

| Name |
| --- |
| `expanded` |
| `expandedAll` |
| `collapseed` |
| `collapseedAll` |


#### 3. appendRow() API's parameter

```js
// Example
var options = {
    parentRowKey: 3,
    offset: 0,
    // ...
};

grid.appendRow(row, options);
```

| Name | Description |
| --- | --- |
| `parentRowKey` | Parent row key value for rows to add |
| `offset` | If the parent already has child rows, determine where to add it |


### APIs that behavior changes when a tree column is activated

| Name | Description |
| --- | --- |
| `appendRow` | Create child rows below current row  |
| `prependRow` | Create child rows below current row |
| `removeRow` | If there are child rows, delete them together |
| `check` | If set `useCascadingCheckbox: true`, check the checkbox to keep the parent-child relationship |
| `uncheck` | If set `useCascadingCheckbox: true`,  uncheck the checkbox to keep the parent-child relationship |

### Notice

* When using a tree column, there are restrictions on the use of **sorting**, **row merging**, **pagination**.

### Reference

More information can be found in the links below.

* [Example](https://nhnent.github.io/tui.grid/latest/tutorial-example14-tree.html)
* [APIs](https://nhnent.github.io/tui.grid/latest/Grid.html)
